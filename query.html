<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>推荐职位</title>
        <link rel="stylesheet" href="styles/bootstrap.min.css">
        <style>
        img.avatar{
        width: 64px;
        height: auto;
        }
        td {
            vertical-align: middle !important;
        }
        td.detail {
            width: 60%;
        }
        tr {
            cursor: pointer;
        }
        .control {
            position: fixed;
            left: 10px;
            bottom: 10px;
            width: 100px;
        }
    
        @media print{
            .control {
                display: none;
            }
            .progress {
                display: none;
            }
        }

        .progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
        }
        .container{margin-top: 20px;}
        </style>
    </head>
    <body>
        <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                JD加载数：0/0
            </div>
        </div>
        <div class="control">
            <button type="button" class="btn btn-default navbar-btn loadall">加载全部JD</button>
        </div>
        <div class="container">
            <table class="table table-hover">
            <tbody id="coms-list"></tbody>
        </table>
    </div>
    <script type="text/tpl" id="tpl-com">
    <%for(var i = 0;i<coms.length;++i){ %>
    <tr class="com-item" data-com-name="<%=coms[i].name%>" data-com-id="<%=coms[i].id%>">
        <td><img class="avatar" src="<%=coms[i].avatar%>" alt="<%=coms[i].name%>"/></td>
        <td><h3><%=coms[i].name%>(<%=coms[i].jobs.length%>)</h3>
            <span class="label label-primary"><%=coms[i].comIndustry%></span>
            <span class="label label-info"><%=coms[i].comFinancing%></span>
        </td>
        <td class="detail">
        </td>
    </tr>
    <%var jobs = coms[i].jobs; for(var j=0;j<jobs.length;++j){ %>
    <tr class="job-item notloaded" data-job-id="<%=jobs[j].jobId%>">
        <td></td>
        <td><h4><%=jobs[j].jobName%></h4></td>
        <td>
            <%if(jobs[j].isUrgent){%><span class="label label-warning">急招</span><%}%>
            <%if(jobs[j].isNew){%><span class="label label-danger">NEW</span><%}%>
            <span class="label label-success"><%=jobs[j].jobCity%></span>
        </td>
    </tr>
    <% } %>
    <% } %>
    </script>
    <script type="text/tpl" id="tpl-jd">
    <tr>
        <td></td>
        <td colspan="2">
            <%=jd%>
        </td>
    </tr>
    </script>
</body>
<script src="lib/jquery.js"></script>
<script src="lib/bootstrap.min.js"></script>
<script src="lib/require.js"></script>
<script src="scripts/query.js"></script>
</html>